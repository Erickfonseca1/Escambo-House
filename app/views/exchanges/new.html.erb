<h1>Solicitar Troca</h1>

<% if @services.any? %>
  <%= form_with model: @exchange, local: true do |form| %>
    <div>
      <%= form.label :service_offered_id, 'Seu Serviço' %>
      <%= form.collection_select :service_offered_id, @services, :id, :title, prompt: "Selecione um serviço" %>
    </div>

    <% if @service_requested %>
      <p>Serviço solicitado: <strong><%= @service_requested.title %></strong></p>
      <%= form.hidden_field :service_requested_id, value: @service_requested.id %>
      <%= form.hidden_field :owner_id, value: @service_requested.user.id %>
    <% end %>

    <div>
      <%= form.submit 'Solicitar Troca', class: 'btn btn-success' %>
    </div>
  <% end %>
<% else %>
  <p>Você ainda não tem serviços disponíveis para trocar.</p>
  <%= link_to 'Adicionar um novo serviço', new_service_path, class: 'btn btn-primary' %>
<% end %>